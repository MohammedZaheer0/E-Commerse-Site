<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Icons -->
    <script src="https://kit.fontawesome.com/eef519840c.js" crossorigin="anonymous"></script>
    <!-- Font Family -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@100;200;300;400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <title>UrbanoGrove Website</title>
</head>
<body>

    <div id="main">
        <!-- Navbar -->
        <nav class="navbar">

            <div class="navleft">
               <img src="/images/logo (1).png" alt=""> 
            </div>

            <div class="navright">
                <ul>
                    <li><a href="index.html">Home</a></li>
                    <li><a href="shop.html">Shop</a></li>
                    <li><a href="blog.html">Blog</a></li>
                    <li><a href="about.html">About</a></li>
                    <li><a href="contact.html">Contact</a></li>
                    <li><a href="cart.html"><i class="fa-solid fa-cart-shopping"></i></a></li>
                    <i id="close" class="fa-solid fa-xmark"></i>
                </ul>
            </div>
            <div class="mobile">
            <i id="open" class="fa-solid fa-bars"></i>
            </div>
        </nav>



        <section class="main-new cart-main">
                <h1 class="onallproducts">#Cart</h1>
                <p>Add your coupon code & Save upto 70%!</p>
        </section>


        <section class="table">
            <table>
                <thead>
                    <tr>
                        <th>REMOVE</th>
                        <th>IMAGE</th>
                        <th>PRODUCT</th>
                        <th>PRICE</th>
                        <th>QUANTITY</th>
                    </tr>
                </thead> 
                <tbody id="tbody">
                    <!-- <tr>
                        <td id="delete"><i class="fa-solid fa-circle-xmark"></i></td>
                        <td><img src="" class="MainImg"></td>
                        <td class="clothName"></td>
                        <td class="clothprice"></td>
                        <td><input type="number" value="1"></td>
                    </tr>    -->
   
                </tbody>
            </table>
        </section>



        <section class="cart-coupon-total">
            <div class="cart-coupon">
                <h2>Apply Coupon</h2>
                <div class="coupon-input-apply">
                    <input type="text" placeholder="Enter Your Coupon Code">
                    <button class="couponbtn">Apply</button>
                </div>
            </div>

            <div class="cart-total">
                <h2>Cart Totals</h2>
                <table>
                    <tr>
                        <td>Cart SubTotal</td>
                        <td class="Totalclothprice">0</td>
                    </tr>
                    <tr>
                        <td>Shopping</td>
                        <td>Free</td>
                    </tr>
                    <tr>
                        <th>Total</th>
                        <th class="Totalclothprice">0</th>
                    </tr>
                </table>
                <button class="checkout">Proceed To Checkout</button>
            </div>
        </section>


        <footer>
            <div class="footercontact">
                <img src="images/logo (1).png">
                <div class="contact">
                    <h4>Contact</h4>
                    <p><span>Address:</span> Abcd Road 32 Street India</p>
                    <p><span>Phone: </span>+91 1010101010</p>
                    <p><span>Hours: </span>10:00 - 18:00 Mon-Sat</p>
                    <h4 class="follow">Follow Us</h4>
                    <div class="followus">
                        <i class="fa-brands fa-facebook"></i>
                        <i class="fa-brands fa-twitter"></i>
                        <i class="fa-brands fa-instagram"></i>
                        <i class="fa-brands fa-telegram"></i>
                        <i class="fa-brands fa-youtube"></i>
                    </div>
                </div>
            </div>

            <div class="footerabout">
                <h4>About</h4>
                <p><a href="about.html">About Us</a></p>
                <p><a href="#">Delivery Information</a></p>
                <p><a href="#">Privacy Policy</a></p>
                <p><a href="#">Terms & Conditions</a></p>
                <p><a href="contact.html">Contact Us</a></p>
            </div>

            <div class="footermyaccount">
                <h4>My Account</h4>
                <p>Sign In</p>
                <p>View Cart</p>
                <p>My Wishlist</p>
                <p>Track My Order</p>
                <p>Help</p>
            </div>

            <div class="footerinstallapp">
                <h4>Install App</h4>
                <p>From App Store or Google Store</p>
                <div class="appgoogle">
                    <img src="images/app.jpg">
                    <img src="images/play.jpg" alt="">
                </div>
                <p>Secured Payment Geteways</p>
                <img src="images/pay.png" alt="">
            </div>

        </footer>



    </div>
    
    <script src="main.js"></script>



    <script>

        let TotalPrice = 0;
        let CartProductData = () => {
            let ProductDetailes = JSON.parse(localStorage.getItem("ProductDetailes")) ?? [];
            let TableBody = document.getElementById("tbody");

            ProductDetailes.forEach((Element, index) => {
                let CartData = document.createElement("tr");
                let ProductPrice = parseFloat(Element.price.replace('$', '')) || 0;

                if(!isNaN(ProductPrice)){
                let Quantity = 0;
                CartData.innerHTML = `<tr class="tableRow">
                                        <td class="delete"><i class="fa-solid fa-circle-xmark"></i></td>
                                        <td><img src=${Element.image} class="MainImg"></td>
                                        <td class="clothName">${Element.clothName}</td>
                                        <td class="clothprice">${Element.price}</td>
                                        <td id="inline">
                                            <button class="decrease" data-index="${index}">-</button>
                                            <p class="number">1</p>
                                            <button class="increase" data-index="${index}">+</button>
                                        </td>
                                    </tr>`;

                TableBody.appendChild(CartData);


                CartData.querySelector(".increase").addEventListener("click", function () {
                    Quantity += 1;
                    TotalPrice += ProductPrice;
                    updateProductDetails(CartData, Quantity, TotalPrice);
                });
                CartData.querySelector(".decrease").addEventListener("click", function () {
                    if (Quantity > 0) {
                        Quantity -= 1;
                        TotalPrice -= ProductPrice;
                        updateProductDetails(CartData, Quantity, TotalPrice);
                    }
                });
            }else{
                console.log(`Invalid price for product at index ${index}`);
            }
            });

            function updateProductDetails(CartData, Quantity, TotalPrice) {
            CartData.querySelector(".number").textContent = Quantity;

            let TotalPriceElement = document.querySelectorAll(".Totalclothprice");
            TotalPriceElement.forEach(element => {
                element.textContent = `$ ${parseFloat(TotalPrice).toFixed(2)}`;
            });

            
        }

        let deleteIcons = document.querySelectorAll(".delete");
        deleteIcons.forEach((deleteIcon, index) => {
        deleteIcon.addEventListener("click", function() {
            if(confirm("Are You Sure Wan't To Delete Cart?")== true){
                let productDetails = JSON.parse(localStorage.getItem("ProductDetailes")) || [];
                productDetails.splice(index, 1);
                localStorage.setItem("ProductDetailes", JSON.stringify(productDetails));
                window.location.reload();
            }
        });
        });
        

        }
        CartProductData();





    </script>
</body>
</html> 